<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NLMech: NLMech</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NLMech
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NLMech </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__root_project_README"></a> <a href="https://circleci.com/gh/nonlocalmodels/NLMech"><img src="https://circleci.com/gh/nonlocalmodels/NLMech.svg?style=shield" alt="CircleCI" style="pointer-events: none;" class="inline"/></a> <a href="https://www.codacy.com/gh/nonlocalmodels/NLMech?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=nonlocalmodels/NLMech&amp;utm_campaign=Badge_Grade"><img src="https://app.codacy.com/project/badge/Grade/118379d7d745464584b73e9e06f60462" alt="Codacy Badge" class="inline"/></a> <a href="https://coveralls.io/github/nonlocalmodels/NLMech?branch=main"><img src="https://coveralls.io/repos/github/nonlocalmodels/NLMech/badge.svg?branch=main" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/nonlocalmodels/NLMech/issues"><img src="https://img.shields.io/github/issues/nonlocalmodels/nlmech.svg" alt="GitHub issues" style="pointer-events: none;" class="inline"/></a> <img src="https://img.shields.io/github/release/nonlocalmodels/NLMech.svg" alt="GitHub release" style="pointer-events: none;" class="inline"/> <a href="https://github.com/nonlocalmodels/nonlocalmodels.github.io/blob/main/LICENSE"><img src="https://img.shields.io/github/license/nonlocalmodels/nonlocalmodels.github.io.svg" alt="GitHub license" style="pointer-events: none;" class="inline"/></a> <a href="https://joss.theoj.org/papers/271dd66ea91b7fbfdccb4b10a7ba462c"><img src="https://joss.theoj.org/papers/271dd66ea91b7fbfdccb4b10a7ba462c/status.svg" alt="status" style="pointer-events: none;" class="inline"/></a> <a href="https://zenodo.org/badge/latestdoi/178625941"><img src="https://zenodo.org/badge/178625941.svg" alt="DOI" style="pointer-events: none;" class="inline"/></a></p>
<p style="text-align:center;"></p>
<p><img src="https://github.com/nonlocalmodels/NLMech/blob/main/assets/logo/logo_sim.png?raw=true" alt="logo" width="400" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md31"></a>
Introduction</h1>
<p>Welcome to the NLMech repository. In this project, we implement Peridynamics model of fracture using meshfree and finite element discretizations. A brief overview of the equations is available <a href="https://nonlocalmodels.github.io/documentation/md_content_equations.html">here</a>. NLMech primarily served as a code for academic research (e.g., [1,2]), however, we plan to improve it further for a large-scale usage. The plan also includes development of fully distributed solver using HPX library for asynchronous computation to its maximum potential. In [3], we discuss the structure of NLMech and use HPX library for multi-threading computation. For further list of publications based on this library, we refer to the <a href="https://nonlocalmodels.github.io/publications/">publication list</a>.</p>
<p>At present, the library consists of multiple material models such as</p><ul>
<li><b>RNP</b> - Regularized Nonlinear Potential. This is implemented in class <a href="src/material/pd/rnpBond.h">RNPBond</a>.</li>
<li><b>State-based peridynamics</b> - State-based peridynamics model. This is implemented in class <a href="src/material/pd/ElasticState.h">ElasticState</a>.</li>
</ul>
<p>One of the main features of NLMech is the implementation of both explicit time discretization for dynamic problems (see <a href="src/model/fd/fDModel.h">FDModel</a>) and implicit discretization for quasi-static problems (see <a href="src/model/quasistatic/QuasiStaticModel.h">QuasiStaticModel</a>).</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Documentation and getting started</h1>
<p>All source and header files are fairly well documented. We used doxygen to automatically generate the documentation of methods, classes, etc. For complete documentation follow this <a href="https://nonlocalmodels.github.io/documentation/">link</a>.</p>
<p>We provide shell scripts to help with the installation of dependencies and the NLMech itself. We also provide Docker images for a quick test of the library and to run the examples. In section <code>Installation</code>, we describe the dependencies, installation of dependencies, and building NLMech code. In section <code>Running NLMech</code>, we discuss how to run the examples.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md34"></a>
Build tools</h2>
<p>The following build tools are needed to compile the NLMech and its dependencies:</p><ul>
<li>GCC compiler collection (gcc) &gt; 4.9, however, gcc &gt;= 8 is recommended</li>
<li><a href="https://www.gnu.org/software/autoconf/">autoconf</a></li>
<li><a href="https://www.gnu.org/software/wget/">wget</a></li>
<li><a href="https://cmake.org/">cmake</a></li>
<li><p class="startli"><a href="https://git-scm.com/">git</a></p>
<p class="startli">On Ubuntu you might install all dependencies using the papackage manager:</p>
</li>
</ul>
<div class="fragment"><div class="line">apt-get install build-essential git wget cmake libssl-dev libblas-dev liblapack-dev autoconf freeglut3-dev</div>
</div><!-- fragment --><p>On Fedora you might install all dependencies using the package manager</p>
<div class="fragment"><div class="line">dnf install @development-tools cmake git wget blas-devel lapack-devel freeglut-devel</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
Dependencies</h2>
<p>We use cmake to build the code. We list the dependencies and how they are used in the code below:</p><ul>
<li><a href="https://cmake.org/">CMake</a> 3.16<ul>
<li>To generate makefiles</li>
</ul>
</li>
<li><a href="https://www.boost.org/">Boost</a> 1.75<ul>
<li>Required to build HPX and YAML libraries</li>
</ul>
</li>
<li><a href="https://github.com/STEllAR-GROUP/hpx">HPX</a> 1.6.0<ul>
<li>Provides methods for multithreading computation</li>
</ul>
</li>
<li><a href="https://bitbucket.org/blaze-lib/blaze/src/master/">Blaze</a> 3.8<ul>
<li>Required to build the BlazeIterative library</li>
</ul>
</li>
<li><a href="https://github.com/STEllAR-GROUP/BlazeIterative">Blaze_Iterative</a> master<ul>
<li>Provides linear algebra support such as storage and inversion of stiffness matrix</li>
</ul>
</li>
<li><a href="https://gmsh.info/">gmsh</a> 4.7<ul>
<li>Our code directly interfaces with gmsh to use input-ouput functions of gmsh</li>
</ul>
</li>
<li><a href="https://www.vtk.org">VTK</a> 9.0<ul>
<li>For read-write operations on <code>.vtu</code> type files</li>
</ul>
</li>
<li><a href="https://github.com/jbeder/yaml-cpp">YAML-CPP</a> 0.6<ul>
<li>To parse <code>.yaml</code> input files</li>
</ul>
</li>
</ul>
<p>On Ubuntu you might install all dependencies using the papackage manager:</p>
<div class="fragment"><div class="line">apt-get install libyaml-cpp-dev libvtk7-dev gmsh boost-devel</div>
</div><!-- fragment --><p>Note that on Ubuntu you need to install HPX, Blaze, and Blaze_Iterative since there is no package available.</p>
<p>On Fedora you might install all dependencies using the package manager</p>
<div class="fragment"><div class="line">dnf install hpx-devel cmake blaze-devel vtk-devel yaml-cpp-devel gmsh-devel</div>
</div><!-- fragment --><p>Note on Fedora, you need only to install Blaze_Itertaive.</p>
<p>Following dependencies are optional, but are recommended for the large simulations:</p><ul>
<li><a href="https://github.com/PointCloudLibrary/pcl">PCL</a> 1.11<ul>
<li>Used in neighbor search calculation (KDTree)</li>
</ul>
</li>
<li><a href="https://github.com/flann-lib/flann">Flann</a> 1.9<ul>
<li>Required to build PCL library</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
Building dependencies</h2>
<p>Building above dependencies is quite a challenge. To help with this, we provide the bash scripts for Ubuntu-20.04 and Fedor operating systems: <a href="https://github.com/nonlocalmodels/buildscripts/tree/main/bash">Bash scripts</a>).</p>
<p>Further, we provide various docker files</p><ul>
<li>to build the code on Fedora using Fedora packages, see <a href="https://github.com/nonlocalmodels/buildscripts/blob/main/Docker/Fedora">Using Fedora Packages</a></li>
<li>to build all the dependencies and the code on Fedora, see <a href="https://github.com/nonlocalmodels/buildscripts/blob/main/Docker/FedoraAll">Build Dependencies and Code on Fedora</a></li>
<li>to build dependencies and the code on Ubuntu-20.04, see <a href="https://github.com/nonlocalmodels/buildscripts/blob/main/Docker/FedoraAll">Build Dependencies and Code on Ubuntu</a>.</li>
</ul>
<p>In <a href="https://github.com/nonlocalmodels/HPCBuildInfrastructure">Scripts</a>, bash scripts to build individual dependencies such as blaze, vtk, hpx, etc, on HPC systems is provided.</p>
<p>A more detailed version of the build instruction is available <a href="https://nonlocalmodels.github.io/documentation/md_content_install_instructions.html">here</a>.</p>
<blockquote class="doxtable">
<p>:exclamation: We recommend to use the same CMake version and same compiler version to build the HPX and NLMech. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md37"></a>
Compiling library</h2>
<p>Assuming all the dependencies are installed at standard paths such as <code>/usr/local</code>, we build NLMech as follows </p><div class="fragment"><div class="line">git clone https://github.com/nonlocalmodels/NLMech.git </div>
<div class="line">cd NLMech</div>
<div class="line">mkdir build &amp;&amp; cd build </div>
<div class="line"> </div>
<div class="line"># turn building documentation and tools, dependency on PCL off by using &#39;OFF&#39; instead of &#39;ON&#39;</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line">      -DEnable_Documentation=ON \</div>
<div class="line">      -DEnable_Tools=ON \</div>
<div class="line">      -DEnable_PCL=ON \</div>
<div class="line">      .. </div>
<div class="line">      </div>
<div class="line"># compile the code</div>
<div class="line">make -j $(cat /proc/cpuinfo | grep processor | wc -l) VERBOSE=1</div>
</div><!-- fragment --><p>In case certain libraries such as <code>HPX, PCL, Blaze_Iterative</code> are installed at custom paths, one would need to provide correct paths to <code>cmake</code> as follows: </p><div class="fragment"><div class="line">cmake -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line">      -DEnable_Documentation=ON \</div>
<div class="line">      -DEnable_Tools=ON \</div>
<div class="line">      -DEnable_PCL=ON \</div>
<div class="line">      -DHPX_DIR=&lt;hpx-path&gt;/lib/cmake/HPX \</div>
<div class="line">      -DPCL_DIR=&lt;pcl-path&gt; \</div>
<div class="line">      -DYAML_CPP_DIR=&lt;yaml-cpp-path&gt; \</div>
<div class="line">      -DBLAZEITERATIVE_DIR=&lt;blaze-iterative path&gt; \</div>
<div class="line">      -DGMSH_DIR=&lt;gmsh-path&gt; \</div>
<div class="line">      .. </div>
<div class="line">      </div>
<div class="line">make -j $(cat /proc/cpuinfo | grep processor | wc -l) VERBOSE=1</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md38"></a>
Running NLMech</h1>
<p>To quickly run the tests and examples, you may use Docker image with the <a href="https://hub.docker.com/r/diehlpk/nlmech/tags?page=1&amp;ordering=last_updated">latest Successful build</a> of the main branch.</p>
<div class="fragment"><div class="line">podman/docker pull diehlpk/nlmech:latest</div>
<div class="line">podman/docker run -it docker.io/diehlpk/nlmech /bin/bash</div>
<div class="line">cd /app/NLMech/examples/qsModel/1D</div>
<div class="line"># Generate the mesh file</div>
<div class="line">/app/NLMech/build/bin/mesh -i input_mesh.yaml -d 1</div>
<div class="line"># Run the simulation</div>
<div class="line">/app/NLMech/build/bin/NLMech -i input.yaml --hpx:threads=2</div>
</div><!-- fragment --><p>In <a href="https://nonlocalmodels.github.io/examples/">examples</a>, we provide information on how to prepare a simulation setup input file using <a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html">YAML</a>.</p>
<p>Asume, you have build NLMech on your own, you can go the the <code>build</code> folder and run the executable as below</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">./bin/NLMech -i input.yaml --hpx:threads=n</div>
</div><!-- fragment --><p>with the first argument <code>-i</code> the <code>input.yaml</code> file is specified and the second argument <code>--hpx:threads</code> the amount of CPU cores HPX is allowed to use is specified. If you do not specify any number there all coes of the CPU are used to run the simulation. Note that in the current version only shared memory parallism is provided, however, we plan to add dsitributed memory to the code in the near future.</p>
<p>The one-dimensional quasi-static example is computational inexpesive, therfore, we used it in the Docker example to finish the simulation soon. For scaling test, we recommend to use any of the two-dimensional examples.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Trouble, issues, bugs</h1>
<p>In case you found a bug in the library, want to contribute, or need a feature, please create a new <a href="https://github.com/nonlocalmodels/NLMech/issues">issue</a>.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Releases</h1>
<p>The current stable version is <a href="https://GitHub.com/nonlocalmodels/NLMech/releases/"><img src="https://img.shields.io/github/release/nonlocalmodels/NLMech.svg" alt="GitHub release" style="pointer-events: none;" class="inline"/></a>. Main development branch is the <a href="https://github.com/nonlocalmodels/NLMech">main branch</a>. For more details, we refer to the <a href="https://github.com/nonlocalmodels/NLMech/blob/main/CHANGELOG.md">Changelog</a> file.</p>
<h1><a class="anchor" id="autotoc_md41"></a>
Code of conduct</h1>
<p>We have adopted a <a href="https://github.com/nonlocalmodels/NLMech/blob/main/CODE_OF_CONDUCT.md">code of conduct</a> for this project.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Contributing</h1>
<p>The source code is released under the <a href="https://github.com/nonlocalmodels/nonlocalmodels.github.io/blob/main/LICENSE"><img src="https://img.shields.io/github/license/nonlocalmodels/nonlocalmodels.github.io.svg" alt="GitHub license" style="pointer-events: none;" class="inline"/></a> license. If you like to contribute, we only accept your pull request using the same license. Please feel free to add your name to license header of the files you added or contributed to. If possible please add a test for your new feature using <a href="https://gitlab.kitware.com/cmake/community/-/wikis/doc/ctest/Testing-With-CTest">CTest</a>. We adapted the Google C++ <a href="https://google.github.io/styleguide/cppguide.html">Style Guide</a> for this project. We use the <a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> tool to format the source code with respect to this style guide. Please run the <code>format.sh</code> script before your do the pull request.</p>
<h1><a class="anchor" id="autotoc_md43"></a>
Citing</h1>
<p>In publications, please use our paper as the main citation for NLMech:</p><ul>
<li>Diehl, P., Jha, P. K., Kaiser, H., Lipton, R., &amp; Lévesque, M. (2020). An asynchronous and task-based implementation of peridynamics utilizing HPX—the C++ standard library for parallelism and concurrency. SN Applied Sciences, 2(12), 1-21. In addition, please use our <a href="https://joss.theoj.org/">JOSS</a> for the referencing the code</li>
<li>Jha et al., (2021). NLMech: Implementation of finite difference/meshfree discretization of nonlocal fracture models. Journal of Open Source Software, 6(65), 3020, <a href="https://doi.org/10.21105/joss.03020">10.21105/joss.03020</a></li>
</ul>
<p>For more references, we refer to NLMech's <a href="https://nonlocalmodels.github.io/publications/">publication list</a>.</p>
<h1><a class="anchor" id="autotoc_md44"></a>
Acknowledgments</h1>
<p>NLMech has been funded by:</p><ul>
<li>Army Research Office Grant # W911NF-16-1-0456 to PI Dr. Robert Lipton (Professor at Louisiana State University). This grant supported Prashant K. Jha on a postdoctoral position from October 2016 - July 2019.</li>
<li>Canada Research Chairs Program under the Canada Research Chair in Multiscale Modelling of Advanced Aerospace Materials held by M. Lévesque; Natural Sciences and Engineering Research Council of Canada (NSERC) Discovery Grants Program under Discovery Grant RGPIN-2016-06412.</li>
<li>We are grateful for the support of the <a href="https://summerofcode.withgoogle.com/">Google Summer of Code program</a> funding internships.</li>
</ul>
<h1><a class="anchor" id="autotoc_md45"></a>
References</h1>
<p>[1] Jha, P. K., &amp; Lipton, R. (2019). Numerical convergence of finite difference approximations for state based peridynamic fracture models. Computer Methods in Applied Mechanics and Engineering, 351, 184-225.</p>
<p>[2] Jha, P. K., &amp; Lipton, R. P. (2020). Kinetic relations and local energy balance for LEFM from a nonlocal peridynamic model. International Journal of Fracture, 226(1), 81-95.</p>
<p>[3] Diehl, P., Jha, P. K., Kaiser, H., Lipton, R., &amp; Lévesque, M. (2020). An asynchronous and task-based implementation of peridynamics utilizing HPX—the C++ standard library for parallelism and concurrency. SN Applied Sciences, 2(12), 1-21. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
